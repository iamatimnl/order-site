<!DOCTYPE html>

<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Nova Asia Bestellen</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
    background: var(--primary-color);
    color: var(--secondary-color);
    padding-top: 60px;
    text-align: center;
  }

    :root {
    --primary-color: #f2f2f7; /* 主背景，高级浅灰 */
    --section-alt-bg: #e5e5ea; /* 卡片灰色 */
    --secondary-color: #2c2c2e; /* 文字深灰 */
    --accent-color: #30b158; /* 苹果深绿，带轻奢气质 */

    --accent-gradient-start: #0a84ff; /* 渐变开始 iOS 蓝 */
    --accent-gradient-mid: #30db5b; /* 渐变中间柔和绿 */
    --accent-gradient-end: #34c759; /* 渐变结束 iOS 绿 */
    --off-white: #ffffff; /* 局部白色 */
  --sakura: #ff4f70; /* 点缀樱花粉 */
  --gold: #c8a95c; /* 轻奢金色 */
}

  .stars {
    color: var(--gold);
  }

    /* Hide horizontal scroll bar in all modern browsers */
  .navbar-container::-webkit-scrollbar {
    display: none;
  }
  .navbar-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .navbar-container {
  position: fixed; /* 或 sticky 也可以 */
  top: 0;
  left: 0; /* 👈 保证贴左边 */
  width: 100vw;
  padding: 0;
  margin: 0;
  background-color: var(--off-white);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-bottom: 1px solid #ccc;
  z-index: 999;
}

  .navbar {
    display: flex;
    flex-direction: row;
    white-space: nowrap;
    position: relative;
    width: 100vw;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    scroll-behavior: auto;
  }

  .nav-categories {
    display: flex;
    white-space: nowrap;
  }

  @media (min-width: 768px) {
    .nav-categories {
      margin: 0 auto;
    }
  }

  .navbar a {
    flex: 0 0 auto;
    padding: 14px 20px;
    color: var(--accent-color);
    text-decoration: none;
    font-weight: bold;
    border-radius: 24px;
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
  }

  .navbar a.active {
    color: white;
  }

  
    .indicator {
      position: absolute;
      height: 32px;
      background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
      border-radius: 24px;
      bottom: 8px;
      z-index: 1;
      transition: all 0.3s ease;
      will-change: transform;
      box-shadow:
        inset 0 1px 1px rgba(255, 255, 255, 0.4),
        0 4px 8px rgba(10, 132, 255, 0.35),
        0 6px 20px rgba(10, 132, 255, 0.2);
    }

  .navbar::after {
    content: "";
    flex: 0 0 50vw;
  }



  section {
    height: auto;
    padding: 40px 20px;
    box-sizing: border-box;
    border-bottom: 1px solid #ccc;
    border-radius: 16px;
    background: var(--off-white);
    margin-bottom: 20px;
  }

  section:nth-child(even) {
    background: var(--section-alt-bg);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p {
    text-align: center;
  }

  .menu-item {
    position: relative;
    aspect-ratio: 1 / 1;
    overflow: hidden;
    border-radius: 16px;
    margin: 10px auto;
    max-width: 280px;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  .menu-item img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  img.supply-img {
    width: 32px;
    height: 32px;
    object-fit: cover;
    border-radius: 12px;
  }

  .menu-item span {
    font-size: 1rem;
    white-space: normal;
    word-break: break-word;
    position: relative;
    z-index: 1;
  }

  .menu-item .menu-content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
  }

  .menu-item h3,
  .menu-item p {
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    padding: 4px 8px;
    margin: 2px 0;
  }

  .qty-box {
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px;
    width: calc(100% - 16px);
    justify-content: center;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
  }

 .menu-item select {
  max-width: 92px;
  width: 32%;
  margin: 2px 0;
  padding: 4px 6px;
  font-size: 0.85rem;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: rgba(255, 255, 255, 0.7);
  box-sizing: border-box;
}
  
  .menu-item button,
  .menu-item label {
    margin: 2px 0;
    padding: 4px 6px;
    font-size: 0.85rem;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: rgba(255, 255, 255, 0.7);
  }

  .bubble-option {
    display: flex;
    flex-direction: column;
    width: 100%;
  }


  .menu-item button {
    width: 2.2rem;
    height: 2.2rem;
    font-size: 1rem;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    border: 1px solid var(--accent-color);
    background: #fff;
    color: var(--accent-color);
    transition: background 0.2s ease;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

/* 保留颜色差异 */
.add-button {
  background: var(--accent-color);
  color: white;
  border: none;
}

.add-button:hover {
  background: #0051a8;
}

.remove-button {
  background: var(--sakura);
  color: white;
  border: none;
}

.remove-button:hover {
  background: #ff7b94;
}

/* Generic button press feedback */
button {
  transition: transform 0.1s ease, filter 0.1s ease, box-shadow 0.1s ease;
  touch-action: manipulation;
}

button:active {
  transform: scale(0.94);
  filter: brightness(0.85);
  box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.35);
}

/* 手机端同样保持一致大小 */
@media (max-width: 600px) {
  .menu-item button {
    width: 1.8rem;
    height: 1.8rem;
    font-size: 0.9rem;
  }
}



.cart-section.mobile-visible {
  right: 0 !important;
  display: block !important;
}



@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
  .cart-section {
     background-color: var(--off-white); /* or --section-alt-bg */
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  padding: 16px;
    position: fixed;
    right: 20px;
    top: 80px;
    width: 300px;
    max-height: 80vh;
    overflow-y: auto;
    z-index: 1000;
  }
}

@media (max-width: 767px) {
  .cart-section {
    display: none;
  }

    #cart-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--accent-color);
    color: white;
    border: none;
    border-radius: 12px;
    width: 56px;
    height: 56px;
    font-size: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    z-index: 999;
  }

  .cart-section.mobile-visible {
  position: fixed;
  top: 0;
  right: 0;
  width: 90%;
  height: 100vh;
  background: var(--off-white);
  border-radius: 16px 0 0 16px;
  padding: 20px;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  transition: right 0.3s ease-in-out;
  z-index: 1000;
  } 


}

#closeCartBtn {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  background: var(--off-white);
  color: #333;
  font-size: 22px;
  font-weight: bold;
  border: 1px solid var(--gold);
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  z-index: 1010;

  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  padding: 0;
}
#cart-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  color: white;
  font-size: 28px;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  cursor: pointer;
  z-index: 999;
  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.4),
    0 4px 8px rgba(10, 132, 255, 0.35),
    0 6px 20px rgba(10, 132, 255, 0.2);

  
}

/* logo floating above the cart button */
#back-to-top-logo {
  position: fixed; /* 悬浮 */
  bottom: 86px;    /* 离底部，距离购物车按钮适合 */
  right: 16px;     /* 离右侧 */
  
  /* 阴影效果（你选的轻柔阴影，✔️ 很适合） */

    
  width: 66px;     /* 尺寸 ✔️ 合理 */
  height: 66px;
  border-radius: 16px; /* 圆角 ✔️ 舒适 */
  z-index: 998;    /* 层级 ✔️ 足够悬浮 */
  cursor: pointer; /* 鼠标指针变手型 ✔️ 交互友好 */
  display: none;   /* 默认隐藏，适合用于移动端显示 */
}


@media (max-width: 768px) {
  #back-to-top-logo {
    display: block;
  }
}




@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
}
@media (min-width: 768px) {
  #closeCartBtn {
    display: none;
  }
}
#cart-badge {
  background: var(--gold);
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  position: absolute;
  top: -5px;
  right: -5px;
  display: inline-block;
}
.order-type-track {
  display: flex;
  align-items: center;
  justify-content: space-between;
  
  padding: 0 24px; /* ✅ 留左右缓冲区 */
  background: #f0f0f0; /* 药丸背景 */
  border-radius: 999px;
  position: relative;
}

.delivery-options {
  max-width: 500px;
  margin: auto;
  padding: 24px;
  background: var(--off-white);
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  text-align: left;
}

.delivery-options h2 {
  text-align: center;
  font-size: 1.5rem;
  margin-bottom: 24px;
}


.delivery-options label {
  display: block;
  margin-top: 12px;
  margin-bottom: 4px;
  font-weight: 500;
  font-size: 0.95rem;
}

.delivery-options input,
.delivery-options select {
  width: 100%;
  min-height: 44px;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 12px;
  box-sizing: border-box;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-color: white;
  background-image: url('data:image/svg+xml;utf8,<svg fill="%23666" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px 16px;
  padding-right: 36px;
}


.delivery-options input:focus,
.delivery-options select:focus {
  border-color: var(--accent-color);
  outline: none;
}

.hidden {
  display: none;
}

@media (max-width: 600px) {
  .delivery-options {
    padding: 16px;
  }

  .delivery-options h2 {
    font-size: 1.25rem;
  }
}


.supply-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
  padding: 10px 12px;
  background-color: #f9f5ee;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  flex-wrap: wrap;
}

.supply-img.emoji {
  font-size: 40px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.supply-label {
  font-size: 0.95rem;
  white-space: nowrap;
}

.supply-select {
  min-width: 80px;
  padding: 6px 10px;
  font-size: 0.95rem;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: white;
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23666' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 16px 16px;
  appearance: none;
  box-sizing: border-box;
}


.checkout-btn {
  background-color: var(--accent-color);
  color: white;
  padding: 12px 24px;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  transition: background 0.3s ease;
  margin-top: 16px;
  width: 100%;
}

.checkout-btn:hover {
  background-color: #0051a8;
}

.feedback {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent-color);
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  display: none;
}
  .feedback.error {
    background: #c55;
  }

input, select, textarea {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 8px 10px;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  transition: border-color 0.2s, box-shadow 0.2s;
}
input:hover, select:hover, textarea:hover {
  border-color: #999;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(63,92,75,0.2);
}
.cart-section select {
  width: 20%;
  padding: 10px 12px;
  font-size: 1rem;
  border-radius: 12px;
  border: 1px solid #ccc;
  background-color: #fff;
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23666' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 16px 16px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: border-color 0.3s ease;
}

/* ✅ 统一 focus 样式 */
.cart-section select:focus,
.supply-select:focus {
  outline: none;
  border-color: var(--accent-color);
}

.cart-section textarea {
  width: 100%;
  padding: 10px 12px;
  font-size: 1rem;
  border-radius: 12px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  resize: vertical;
}

.cart-section textarea:focus {
  outline: none;
  border-color: var(--accent-color);
}

.price-details {
  text-align: left;
  margin-top: 10px;
  font-size: 0.95rem;
}
.price-details .price-row {
  display: flex;
  justify-content: space-between;
  margin: 4px 0;
}
.price-details select {
  width: auto;
}
.price-details .total-row {
  font-weight: bold;
  border-top: 1px solid #ccc;
  padding-top: 4px;
}
.price-details .btw-note {
  font-size: 0.85rem;
  color: #555;
  text-align: right;
}



/* 修复结账按钮遮挡问题 - 标准修复版 */
.checkout-panel {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.checkout-scroll-content {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 80px;
}

.fixed-bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 12px;
  background: #fff;
  border-top: 1px solid #ddd;
  z-index: 9999;
  text-align: center;
}

#submit-order {
  font-size: 18px;
  background-color: #222;
  color: white;
  border: none;
  padding: 16px;
  width: 100%;
}

/* 进一步压缩 checkout-panel 高度并确保按钮可见 */
.checkout-panel {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 80vh; /* 明确限制高度为 80vh */
  max-height: 80vh;
  background: #fff;
  z-index: 9998;
  display: flex;
  flex-direction: column;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
}

.checkout-scroll-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  padding-bottom: 80px;
}

.fixed-bottom-bar {
  position: sticky;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 12px;
  background: #fff;
  border-top: 1px solid #ddd;
  z-index: 9999;
  text-align: center;
  box-shadow: 0 -1px 5px rgba(0,0,0,0.05);
}

#submit-order {
  font-size: 18px;
  background-color: #222;
  color: white;
  border: none;
  padding: 16px;
  width: 100%;
  border-radius: 6px;
}
.desktop-only {
  display: block;
}
.mobile-only {
  display: none;
}
@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: block !important;
  }
}
.slider-container {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%); /* ✅ 居中整个胶囊 */
  width: 50%; /* 或者用 max-width 限制最大宽度 */
  max-width: 300px;
  height: 64px;
  background: linear-gradient(to right, rgba(10,132,255,0.35), rgba(255,255,255,0.08));
  backdrop-filter: blur(12px);
  border-radius: 32px;
  padding: 0;
  z-index: 999;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.slider-track {
  position: relative;
  width: 100%;
  margin-left: -20px;
  height: 100%;
  border-radius: 32px;
  background-color:linear-gradient(to right, rgba(10,132,255,0.15), rgba(255,255,255,0.05));
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.slider-button {
  width: 58px;
  height: 58px;
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  border-radius: 50%;
  position: absolute;
  left: 0px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  transition: left 0.3s ease, box-shadow 0.3s ease;
  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.4),
    0 4px 8px rgba(10, 132, 255, 0.35),
    0 6px 20px rgba(10, 132, 255, 0.2);

  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 24px;
}



@keyframes shine {
  0% {
    background-position: -100% 0;
  }
  100% {
    background-position: 100% 0;
  }
}







.slider-text {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 1;
  font-size: 10px;
  font-weight: 600;

  background: linear-gradient(
  90deg,
  rgba(100, 100, 105, 0.85) 0%,
  rgba(255, 255, 255, 0.99) 50%,
  rgba(100, 100, 105, 0.85) 100%
  );
  background-size: 200% auto;
  background-position: -100% 0;
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  -webkit-text-fill-color: transparent;
  animation: shine 4s linear infinite;
}

.spinner {
  width: 24px;
  height: 24px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top: 3px solid white; /* 或其他主色 */
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  display: block;
  margin: auto;
}

/* Order type slider */
.order-type-slider {
  margin: 16px auto 20px;
  width: 90%;
  max-width: 340px;
  height: 48px;
  background: linear-gradient(to right, rgba(10,132,255,0.35), rgba(255,255,255,0.08));
  backdrop-filter: blur(12px); /* ✅ 加毛玻璃 */
  border-radius: 32px;
  position: relative;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
}
.order-type-track {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0 8px;
  box-sizing: border-box;
  background-color:linear-gradient(to right, rgba(10,132,255,0.15), rgba(255,255,255,0.05));

}
.order-type-button {
  position: absolute;
  left: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 45%;
  height: 80%;
  border-radius: 999px;
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  color: #fff;
  font-weight: 600;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.3s ease;
  user-select: none;
  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.4),
    0 4px 8px rgba(10, 132, 255, 0.35),
    0 6px 20px rgba(10, 132, 255, 0.2);

}

.order-type-text {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-weight: 600;
  font-size: 1rem;
  white-space: nowrap;
  background: linear-gradient(
    90deg,
    rgba(100, 100, 105, 0.85) 0%,
    rgba(255, 255, 255, 0.99) 50%,
    rgba(100, 100, 105, 0.85) 100%
  );
  background-size: 200% auto;
  background-position: -100% 0;
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  -webkit-text-fill-color: transparent;
  animation: shine 4s linear infinite;
}
.order-type-text.left {
  left: 12px;
  right: auto;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
.order-type-text {
  font-size: 14px; /* slightly smaller text */
  font-weight: 500; /* keep bold */
  /* prevent text wrapping */
}


/* 响应式控制 */
.desktop-only {
  display: block;
}
.mobile-only {
  display: none;
}
@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: block !important;
  }
}
</style>



</head>
<body>
<div id="status-banner"></div>
<div class="feedback" id="feedback"></div>
<div class="navbar-container" id="navbar-container">
<nav class="navbar" id="navbar">
<div class="nav-categories">
<a href="#delivery-options">delivery-options</a>
<a href="#checkbox-group">checkbox-group</a>
<a href="#bubble">Bubble Tea</a>
<a href="#bento">Bento Box</a>
<a href="#Ramen">Ramen</a>
<a href="#Pokebowl">Pokebowl</a>
<a href="#sushi">Sushi Rolls</a>
<a href="#Crispy-rice-sandwich">Crispy Rice</a>
<a href="#snack">Snack</a>
<a href="#dessert">Dessert</a>
<a href="javascript:void(0)" id="openReviews" class="review-link">Review</a>
</div>
<div class="indicator" id="indicator"></div>
</nav>
</div>
<h1>Nova Asia Online Bestellen</h1>
<section id="delivery-options">
<div class="delivery-options">
<h2>Kies uw bestelmethode</h2>
<div class="order-type-slider">
  <input id="afhalen" name="orderType" type="radio" value="afhalen" onchange="toggleOrderType()" checked class="hidden">
  <input id="bezorgen" name="orderType" type="radio" value="bezorgen" onchange="toggleOrderType()" class="hidden">
  <div class="order-type-track" id="typeSliderTrack">
    <div class="order-type-button" id="typeSliderButton">Pick Up</div>
    <span class="order-type-text" id="typeSliderText">Slide to Deliver</span>
  </div>
</div>
<div class="info-text" id="locationInfo" style="white-space: pre-line; font-size: 0.95rem; margin-top: 8px;"></div>
<!-- Afhalen 表单 -->
<div id="afhalenFields">
<label>Naam:</label>
<input id="pickupName" type="text"/>
<label>Telefoonnummer:</label>
<input id="pickupPhone" type="tel"/>
<label>Email (optioneel):</label>
<input id="pickupEmail" type="email"/>
<label>Tijd van afhalen:</label>
<select id="pickup_time"></select>
<label>Betaalmethode:</label>
<select id="pickupPayment">
<option value="contant">Contant</option>
<option value="pin">Pin</option>
<option value="online">Online betaling</option>
</select>
</div>
<!-- Bezorgen 表单（默认隐藏） -->
<div class="hidden" id="bezorgenFields">
<label>Naam:</label>
<input id="deliveryName" type="text"/>
<label>Telefoonnummer:</label>
<input id="deliveryPhone" type="tel"/>
<label>Email (optioneel):</label>
<input id="deliveryEmail" type="email"/>
<label>Adres:</label>
<input id="deliveryAddress" type="text"/>
<label>Huisnummer:</label>
<input id="deliveryHouseNumber" type="text"/>
<label>Postcode:</label>
<input id="deliveryPostcode" type="text"/>
<label>Gebied:</label>
<input id="deliveryArea" type="text"/>
<div id="mapLinkContainer" style="margin-top: 4px;"></div>
<label>Bezorgtijd:</label>
<select id="delivery_time"></select>
<label>Betaalmethode:</label>
<select id="deliveryPayment">
<option value="contant">Contant</option>
<option value="online">Online betaling</option>
<option value="oprekening">Op rekening</option>
</select>
</div>
</div>
</section>
<section id="checkbox-group">
<div class="checkbox-group">
<h2>Draag bij aan duurzaamheid en voorkom verspilling 🌱</h2>
<p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
    Geef aan hoeveel u nodig heeft:
  </p>
<div class="supply-row">
<img alt="Stokjes" class="supply-img photo" src="{{ url_for('static', filename='images/chopsticks.png') }}"/>
<div class="supply-content">
<label for="chopstickCount">Aantal stokjes</label>
<select class="supply-select" id="chopstickCount"></select>
</div>
</div>
<!-- Sojasaus -->
<div class="supply-row">
<img alt="Sojasaus" class="supply-img photo" src="{{ url_for('static', filename='images/soja saus.webp') }}"/>
<div class="supply-content">
<label for="soyCount">Aantal sojasaus flesjes</label>
<select class="supply-select" id="soyCount"></select>
</div>
</div>
<!-- Wasabi -->
<div class="supply-row">
<img alt="Wasabi" class="supply-img photo" src="{{ url_for('static', filename='images/wasabi.webp') }}"/>
<div class="supply-content">
<label for="wasabiCount">Aantal wasabi</label>
<select class="supply-select" id="wasabiCount"></select>
</div>
</div>
<!-- Gember -->
<div class="supply-row">
<img alt="Gember" class="supply-img photo" src="{{ url_for('static', filename='images/gember.webp') }}"/>
<div class="supply-content">
<label for="gemberCount">Aantal gember</label>
<select class="supply-select" id="gemberCount"></select>
</div>
</div>
</div></section>
<div class="cart-section" id="mobileCart">
<button id="closeCartBtn" onclick="toggleMobileCart()">×</button>
<h2 style="padding-top: 60px;">Winkelwagen</h2>
<ul id="cart"></ul>
<label for="remark" style="display:block;margin-top:10px;">Opmerking:</label>
<textarea id="remark" placeholder="Bijv. geen komkomer, extra mayo" rows="2"></textarea>
<div class="price-details">
<div class="price-row"><span>Subtotaal:</span> <span id="subtotalDisplay">€0,00</span></div>
<div class="price-row"><span>Verpakkingskosten:</span> <span id="packagingDisplay">€0,00</span></div>
<div class="price-row" id="deliveryRow"><span>Bezorgkosten:</span> <span id="deliveryDisplay">€2,50</span></div>
<div class="price-row"><span></span> <span id=""> </span></div>
<div class="price-row"><span></span> <span id=""> </span></div>
<div class="price-row"><span></span> <span id=""> </span></div>
<div class="price-row"><label for="tipSelect">Fooi:</label> <select id="tipSelect"></select></div>
<div class="price-row"><span>BTW (9%):</span> <span id="btwDisplay">€0,00</span></div>
<div class="price-row total-row"><span>Totaal:</span> <span id="totalDisplay">€0,00</span></div>
<div class="btw-note">Alle prijzen zijn inclusief BTW</div>
</div>
<!-- 桌面端正常结账按钮 -->
<button class="checkout-btn desktop-only" onclick="checkout()">Afrekenen &amp; Betalen</button>

<!-- 移动端滑动确认按钮 -->
<div class="slider-container mobile-only">
  <div class="slider-track" id="sliderTrack">
    <div class="slider-button" id="sliderButton"></div>
    <span class="slider-text" id="sliderText">Schuif om te bestellen</span>

  </div>
</div>

</div>
<button id="cart-toggle" onclick="toggleMobileCart()">
  <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" width="30" height="30"    viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 256v128M320 320H192M80 176a16 16 0 00-16 16v216c0 30.24 25.76 56 56 56h272c30.24 0 56-24.51 56-54.75V192a16 16 0 00-16-16zM160 176v-32a96 96 0 0196-96h0a96 96 0 0196 96v32"/></svg>
  <span id="cart-count" style="
      position: absolute;
      top: -6px;
      right: -6px;
      background: red;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.75rem;
      font-weight: bold;
      line-height: 1;">0</span>
</button>
<img alt="Back to top" id="back-to-top-logo" src="{{ url_for('static', filename='images/Logo.png') }}"/>
<section id="bubble">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bubble Tea
</h2>
<div class="menu-row menu-item" data-name="Bubble Tea" data-packaging="0.2" data-price="5">
<div class="menu-img">
<img alt="Bubble Tea" src="{{ url_for('static', filename='images/bubble-tea-main.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Bubble Tea</h3>
<p>€ 5.00</p>
<div class="bubble-option">
<select id="bubbleType">
<option value="">Base</option>
<option value="Green Tea">Green Tea</option>
<option value="Milk Tea">Milk Tea</option>
<option value="Milkshake">Milkshake</option>
</select>
</div>
<div class="bubble-option">
<select id="bubbleFlavor">
<option value="">Smaak</option>
<option value="Mango">Mango</option>
<option value="Appel">Appel</option>
<option value="Matcha">Matcha</option>
<option value="Brown Sugar">Brown Sugar</option>
</select>
</div>
<div class="bubble-option">
<select id="bubbleTopping">
<option value="">Topping</option>
<option value="Appel Popping">Appel Popping</option>
<option value="Perzik Popping">Perzik Popping</option>
<option value="Tapioca">Tapioca</option>
</select>
</div>
<div class="qty-box">
<label for="bubbleTeaQty">Aantal</label>
<button class="qty-minus remove-button" data-target="bubbleTeaQty" type="button">-</button>
<select id="bubbleTeaQty"></select>
<button class="qty-plus add-button" data-target="bubbleTeaQty" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="bento">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bento box
</h2>
<!-- Chicken Bento -->
<div class="menu-row menu-item" data-name="Chicken Bento" data-packaging="0.2" data-price="12">
<div class="menu-img">
<img alt="Chicken Bento" src="{{ url_for('static', filename='images/chicken-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Chicken Bento</h3>
<p>€ 12.00</p>
<div class="qty-box">
<label for="chickenBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="chickenBentoCount" type="button">-</button>
<select id="chickenBentoCount" name="chickenBentoCount"></select>
<button class="qty-plus add-button" data-target="chickenBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Meatlover Bento -->
<!-- Meatlover Bento -->
<div class="menu-row menu-item" data-name="Meatlover Bento" data-packaging="0.2" data-price="14">
<div class="menu-img">
<img alt="Meatlover Bento" src="{{ url_for('static', filename='images/Meatlove bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Meatlover Bento</h3>
<p>€ 14.00</p>
<div class="qty-box">
<label for="meatloverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="meatloverBentoCount" type="button">-</button>
<select id="meatloverBentoCount" name="meatloverBentoCount"></select>
<button class="qty-plus add-button" data-target="meatloverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Zalm Lover Bento -->
<div class="menu-row menu-item" data-name="Zalm Lover Bento" data-packaging="0.2" data-price="13">
<div class="menu-img">
<img alt="Zalm Lover Bento" src="{{ url_for('static', filename='images/zalm-lover-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Zalm Lover Bento</h3>
<p>€ 13.00</p>
<div class="qty-box">
<label for="zalmLoverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="zalmLoverBentoCount" type="button">-</button>
<select id="zalmLoverBentoCount" name="zalmLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="zalmLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Ebi Lover Bento -->
<div class="menu-row menu-item" data-name="Ebi Lover Bento" data-packaging="0.2" data-price="13">
<div class="menu-img">
<img alt="Ebi Lover Bento" src="{{ url_for('static', filename='images/ebi-lover-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi Lover Bento</h3>
<p>€ 13.00</p>
<div class="qty-box">
<label for="ebiLoverBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="ebiLoverBentoCount" type="button">-</button>
<select id="ebiLoverBentoCount" name="ebiLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="ebiLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Surf & Turf Bento -->
<div class="menu-row menu-item" data-name="Surf &amp; Turf Bento" data-packaging="0.2" data-price="15">
<div class="menu-img">
<img alt="Surf &amp; Turf Bento" src="{{ url_for('static', filename='images/surf-turf-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Surf &amp; Turf Bento</h3>
<p>€ 15.00</p>
<div class="qty-box">
<label for="surfTurfBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="surfTurfBentoCount" type="button">-</button>
<select id="surfTurfBentoCount" name="surfTurfBentoCount"></select>
<button class="qty-plus add-button" data-target="surfTurfBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Dimsum Bento -->
<div class="menu-row menu-item" data-name="Dimsum Bento" data-packaging="0.2" data-price="11">
<div class="menu-img">
<img alt="Dimsum Bento" src="{{ url_for('static', filename='images/dimsum-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Dimsum Bento</h3>
<p>€ 11.00</p>
<div class="qty-box">
<label for="dimsumBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="dimsumBentoCount" type="button">-</button>
<select id="dimsumBentoCount" name="dimsumBentoCount"></select>
<button class="qty-plus add-button" data-target="dimsumBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Lamskotelet Bento -->
<div class="menu-row menu-item" data-name="Lamskotelet Bento" data-packaging="0.2" data-price="14">
<div class="menu-img">
<img alt="Lamskotelet Bento" src="{{ url_for('static', filename='images/lamskotelet-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Lamskotelet Bento</h3>
<p>€ 14.00</p>
<div class="qty-box">
<label for="lamsBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="lamsBentoCount" type="button">-</button>
<select id="lamsBentoCount" name="lamsBentoCount"></select>
<button class="qty-plus add-button" data-target="lamsBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Veggie Bento -->
<div class="menu-row menu-item" data-name="Veggie Bento" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Veggie Bento" src="{{ url_for('static', filename='images/veggie-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Veggie Bento</h3>
<p>€ 10.00</p>
<div class="qty-box">
<label for="veggieBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="veggieBentoCount" type="button">-</button>
<select id="veggieBentoCount" name="veggieBentoCount"></select>
<button class="qty-plus add-button" data-target="veggieBentoCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Sushi Bento" data-packaging="0.2" data-price="14">
<div class="menu-img">
<img alt="Sushi Bento" src="{{ url_for('static', filename='images/sushi-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Sushi Bento</h3>
<p>€ 14.00</p>
<div class="qty-box">
<label for="sushiBentoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="sushiBentoCount" type="button">-</button>
<select id="sushiBentoCount" name="sushiBentoCount"></select>
<button class="qty-plus add-button" data-target="sushiBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Xbento - Stel je eigen bento samen -->
<!-- Xbento - Stel je eigen bento samen -->
<div class="menu-row menu-item" data-name="Xbento" data-packaging="0.2" data-price="14">
<div class="menu-img">
<img alt="Xbento" src="{{ url_for('static', filename='images/xbento.png') }}"/>
</div>
<div class="menu-content">
<h3>Xbento (stel zelf samen)</h3>
<p>Vanaf € 14.00</p>
<div class="bubble-option">
<select id="xBentoMain">
<option value="">Hoofdgerecht</option>
<option value="Teriyaki beef">Teriyaki beef</option>
<option value="Karaage chicken">Karaage chicken</option>
<option value="Ebi fry">Ebi fry</option>
<option value="Zalm">Zalm</option>
<option value="Teriyaki chicken">Teriyaki chicken</option>
</select>
</div>
<div class="bubble-option">
<select id="xBentoSide">
<option value="">Bijgerecht</option>
<option value="Gyoza">Gyoza</option>
<option value="Edamame">Edamame</option>
<option value="Spring Roll">Spring Roll</option>
</select>
</div>
<div class="bubble-option">
<select id="xBentoRice">
<option value="">Rijstsoort</option>
<option value="White rice">White rice</option>
<option value="Fried rice (+€5)">Fried rice (+€5)</option>
<option value="Sushi rice">Sushi rice</option>
</select>
</div>
<div class="qty-box">
<label for="xBentoQty">Aantal</label>
<button class="qty-minus remove-button" data-target="xBentoQty" type="button">-</button>
<select class="qty-select" id="xBentoQty" name="xBentoQty"></select>
<button class="qty-plus add-button" data-target="xBentoQty" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<!-- Ramen Section -->
<section id="Ramen">
<h2>Ramen</h2>
<div class="menu-section">
<!-- 示例商品，可替换或添加更多 -->
<div class="menu-row menu-item" data-name="Tonkotsu Ramen" data-packaging="0.2" data-price="13">
<div class="menu-img">
<img alt="Tonkotsu Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
</div>
<div class="menu-content">
<h3>Tonkotsu Ramen</h3>
<p>€ 13.00</p>
<p class="menu-description">Romige varkensbouillon met chashu, ramennoedels, ei en nori.</p>
<div class="qty-box">
<label for="tonkotsuRamenCount">Aantal</label>
<button class="qty-minus remove-button" data-target="tonkotsuRamenCount" type="button">-</button>
<select id="tonkotsuRamenCount" name="tonkotsuRamenCount"></select>
<button class="qty-plus add-button" data-target="tonkotsuRamenCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<!-- Pokebowl Section -->
<section id="Pokebowl">
<h2>Pokebowl</h2>
<div class="menu-section">
<!-- 示例商品，可替换或添加更多 -->
<div class="menu-row menu-item" data-name="Zalm Pokebowl" data-packaging="0.2" data-price="12">
<div class="menu-img">
<img alt="Zalm Pokebowl" src="{{ url_for('static', filename='images/zalm-pokebowl.png') }}"/>
</div>
<div class="menu-content">
<h3>Zalm Pokebowl</h3>
<p>€ 12.00</p>
<p class="menu-description">Verse zalm met sushirijst, avocado, komkommer, wakame en sesam.</p>
<div class="qty-box">
<label for="zalmPokebowlCount">Aantal</label>
<button class="qty-minus remove-button" data-target="zalmPokebowlCount" type="button">-</button>
<select id="zalmPokebowlCount" name="zalmPokebowlCount"></select>
<button class="qty-plus add-button" data-target="zalmPokebowlCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="sushi">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Sushi
</h2>
<div class="menu-row menu-item" data-name="Green Dragon Roll" data-packaging="0.2" data-price="13.5">
<div class="menu-img">
<img alt="Green Dragon Roll" src="{{ url_for('static', filename='images/green-dragon-roll.png') }}"/>
</div>
<div class="menu-content">
<h3>Green Dragon Roll</h3>
<p>Ebi fry roll met avocado &amp; viskuit topping<br/>€ 13.50</p>
<div class="qty-box">
<label for="greenDragonCount">Aantal</label>
<button class="qty-minus remove-button" data-target="greenDragonCount" type="button">-</button>
<select id="greenDragonCount" name="greenDragonCount"></select>
<button class="qty-plus add-button" data-target="greenDragonCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Angry Dragon Roll" data-packaging="0.2" data-price="13.5">
<div class="menu-img">
<img alt="Angry Dragon Roll" src="{{ url_for('static', filename='images/angry-dragon.png') }}"/>
</div>
<div class="menu-content">
<h3>Angry Dragon Roll</h3>
<p>Ebi fry roll met aburi zalm &amp; unagi saus topping<br/>€ 13.50</p>
<div class="qty-box">
<label for="angryDragonCount">Aantal</label>
<button class="qty-minus remove-button" data-target="angryDragonCount" type="button">-</button>
<select id="angryDragonCount" name="angryDragonCount"></select>
<button class="qty-plus add-button" data-target="angryDragonCount" type="button">+</button>
</div>
</div>
</div>
</div></section>
<section id="Crispy-rice-sandwich">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
      Crispy rice sandwich
    </h2>
<!-- Zalm -->
<div class="menu-row menu-item" data-name="Zalm crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Zalm crispy rice sandwich" src="{{ url_for('static', filename='images/zalm.png') }}"/>
</div>
<div class="menu-content">
<h3>Zalm crispy rice sandwich</h3>
<p>€ 7.00</p>
<div class="qty-box">
<label for="zalm-crispy-rice-sandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="zalm-crispy-rice-sandwich" type="button">-</button>
<select id="zalm-crispy-rice-sandwich" name="Zalm crispy rice sandwich"></select>
<button class="qty-plus add-button" data-target="zalm-crispy-rice-sandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Ebi -->
<!-- Ebi Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Ebi crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Ebi Crispy Rice Sandwich" src="{{ url_for('static', filename='images/Ebi.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi crispy rice sandwich</h3>
<p>€ 7.00</p>
<div class="qty-box">
<label for="ebiCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="ebiCrispyRiceSandwich" type="button">-</button>
<select id="ebiCrispyRiceSandwich" name="ebiCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="ebiCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Beef Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Beef crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="Beef Crispy Rice Sandwich" src="{{ url_for('static', filename='images/beef-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef crispy rice sandwich</h3>
<p>€ 7.50</p>
<div class="qty-box">
<label for="beefCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="beefCrispyRiceSandwich" type="button">-</button>
<select id="beefCrispyRiceSandwich" name="beefCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="beefCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- California Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="California crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="California Crispy Rice Sandwich" src="{{ url_for('static', filename='images/california-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>California crispy rice sandwich</h3>
<p>€ 7.50</p>
<div class="qty-box">
<label for="californiaCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="californiaCrispyRiceSandwich" type="button">-</button>
<select id="californiaCrispyRiceSandwich" name="californiaCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="californiaCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Chicken Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Chicken crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Chicken Crispy Rice Sandwich" src="{{ url_for('static', filename='images/chicken-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Chicken crispy rice sandwich</h3>
<p>€ 7.00</p>
<div class="qty-box">
<label for="chickenCrispyRiceSandwich">Aantal</label>
<button class="qty-minus remove-button" data-target="chickenCrispyRiceSandwich" type="button">-</button>
<select id="chickenCrispyRiceSandwich" name="chickenCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="chickenCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="snack">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Snack
</h2>
<div class="menu-row menu-item" data-name="Karaage" data-packaging="0.2" data-price="6.5">
<img alt="Karaage" class="menu-img" loading="lazy" src="{{ url_for('static', filename='images/karaage.png') }}">
<div class="menu-content">
<h3>Karaage (Japanse gefrituurde kip)</h3>
<p>€ 6.50</p>
<div class="qty-box">
<label for="snackCount">Aantal</label>
<button class="qty-minus remove-button" data-target="snackCount" type="button">-</button>
<select id="snackCount" name="snackCount"></select>
<button class="qty-plus add-button" data-target="snackCount" type="button">+</button>
</div>
</div>
</img></div>
</div>
</section>
<section id="dessert">
<div class="menu-group">
<!-- Mango -->
<div class="menu-row menu-item" data-name="Mochi Mango" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Mango" loading="lazy" src="{{ url_for('static', filename='images/mochi-mango.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi – Mango</h3>
<p>€ 4.00</p>
<div class="qty-box">
<label for="mochiMangoCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiMangoCount" type="button">-</button>
<select id="mochiMangoCount" name="mochiMangoCount"></select>
<button class="qty-plus add-button" data-target="mochiMangoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Aardbei -->
<div class="menu-row menu-item" data-name="Mochi Aardbei" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Aardbei" loading="lazy" src="{{ url_for('static', filename='images/mochi-aardbei.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi – Aardbei</h3>
<p>€ 4.00</p>
<div class="qty-box">
<label for="mochiAardbeiCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiAardbeiCount" type="button">-</button>
<select id="mochiAardbeiCount" name="mochiAardbeiCount"></select>
<button class="qty-plus add-button" data-target="mochiAardbeiCount" type="button">+</button>
</div>
</div>
</div>
<!-- Matcha -->
<div class="menu-row menu-item" data-name="Mochi Matcha" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Matcha" loading="lazy" src="{{ url_for('static', filename='images/mochi-matcha.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi – Matcha</h3>
<p>€ 4.00</p>
<div class="qty-box">
<label for="mochiMatchaCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiMatchaCount" type="button">-</button>
<select id="mochiMatchaCount" name="mochiMatchaCount"></select>
<button class="qty-plus add-button" data-target="mochiMatchaCount" type="button">+</button>
</div>
</div>
</div>
<!-- Pistachio -->
<div class="menu-row menu-item" data-name="Mochi Pistachio" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Pistachio" loading="lazy" src="{{ url_for('static', filename='images/mochi-pistachio.png') }}">
</img></div>
<div class="menu-content">
<h3>Mochi – Pistachio</h3>
<p>€ 4.00</p>
<div class="qty-box">
<label for="mochiPistachioCount">Aantal</label>
<button class="qty-minus remove-button" data-target="mochiPistachioCount" type="button">-</button>
<select id="mochiPistachioCount" name="mochiPistachioCount"></select>
<button class="qty-plus add-button" data-target="mochiPistachioCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<script>
const cart = {};
const extras = {
  chopstickCount: { label: 'Stokjes', price: 0 },
  soyCount: { label: 'Sojasaus', price: 0 },
  wasabiCount: { label: 'Wasabi', price: 0 },
  gemberCount: { label: 'Gember', price: 0 }
};

const DEFAULT_PACKAGING_FEE = 0.20;
const DELIVERY_FEE = 2.50;
let currentPackaging = 0;
let currentSubtotal = 0;
let finalTotal = 0;

function formatEuro(val) {
  return `€${val.toFixed(2).replace('.', ',')}`;
}

function updatePriceBreakdown(subtotal, packaging) {
  currentSubtotal = subtotal;
  currentPackaging = packaging;
  const tip = parseFloat(document.getElementById('tipSelect').value || '0');
  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  const deliveryFee = orderType === 'bezorgen' ? DELIVERY_FEE : 0;
  const btw = (subtotal + packaging) * 9 / 109;
  finalTotal = subtotal + packaging + deliveryFee + tip;
  document.getElementById('subtotalDisplay').textContent = formatEuro(subtotal);
  document.getElementById('packagingDisplay').textContent = formatEuro(packaging);
  document.getElementById('deliveryDisplay').textContent = formatEuro(deliveryFee);
  document.getElementById('btwDisplay').textContent = formatEuro(btw);
  document.getElementById('totalDisplay').textContent = formatEuro(finalTotal);
}


function changeBubbleQty(delta) {
  const qtySel = document.getElementById('bubbleTeaQty');
  let val = parseInt(qtySel.value || 0);
  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;

  const type = document.getElementById("bubbleType").value;
  const flavor = document.getElementById("bubbleFlavor").value;
  const topping = document.getElementById("bubbleTopping").value;

  if (!type || !flavor || !topping) return;

  const fullName = `Bubble Tea (${type}, ${flavor}, ${topping})`;
  setQty(fullName, 5, val, DEFAULT_PACKAGING_FEE);
}

function changeXbentoQty(delta) {
  const qtySel = document.getElementById('xBentoQty');
  let val = parseInt(qtySel.value || 0);

  const main = document.getElementById("xBentoMain").value;
  const side = document.getElementById("xBentoSide").value;
  const rice = document.getElementById("xBentoRice").value;

  // 如果没选完配料，不更新数量也不更新购物车
  if (!main || !side || !rice) return;

  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;  // ✅ 只有当所有项都选择后再更新数量

  let basePrice = 14;
  if (rice.includes("Fried rice")) {
    basePrice += 5;
  }

  const fullName = `Xbento (${main}, ${side}, ${rice})`;
  setQty(fullName, basePrice, val, DEFAULT_PACKAGING_FEE);
}



 document.addEventListener('DOMContentLoaded', () => {
  function isBubbleTeaValid() {
    const type = document.getElementById("bubbleType").value;
    const flavor = document.getElementById("bubbleFlavor").value;
    const topping = document.getElementById("bubbleTopping").value;
    return type && flavor && topping;
  }

  function isXbentoValid() {
    const main = document.getElementById("xBentoMain").value;
    const side = document.getElementById("xBentoSide").value;
    const rice = document.getElementById("xBentoRice").value;
    return main && side && rice;
  }

  // 🧋 奶茶按钮加减
  document.querySelector('.qty-plus[data-target="bubbleTeaQty"]').addEventListener('click', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      return;
    }
    changeBubbleQty(1);
  });

  document.querySelector('.qty-minus[data-target="bubbleTeaQty"]').addEventListener('click', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      return;
    }
    changeBubbleQty(-1);
  });

  // 🍱 Xbento 按钮加减（保留一次即可）
  document.querySelector('.qty-plus[data-target="xBentoQty"]').addEventListener('click', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht en rijstsoort voor je Xbento.");
      return;
    }
    changeXbentoQty(1);
  });

  document.querySelector('.qty-minus[data-target="xBentoQty"]').addEventListener('click', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht en rijstsoort voor je Xbento.");
      return;
    }
    changeXbentoQty(-1);
  });

  // 🧋 奶茶 select 直接选择数量时
  document.getElementById('bubbleTeaQty').addEventListener('change', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      document.getElementById('bubbleTeaQty').value = 0;
      return;
    }
    changeBubbleQty(0);
  });

  // 🍱 Xbento select 直接选择数量时
  document.getElementById('xBentoQty').addEventListener('change', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht en rijstsoort voor je Xbento.");
      document.getElementById('xBentoQty').value = 0;
      return;
    }
    changeXbentoQty(0);
  });

  // 🧁 初始化下拉数量为 0～20
  ['bubbleTeaQty', 'xBentoQty'].forEach(id => {
    const sel = document.getElementById(id);
    for (let i = 0; i <= 20; i++) {
      const opt = document.createElement('option');
      opt.value = i;
      opt.text = i;
      sel.appendChild(opt);
    }
    sel.value = 0;
  });
});




  


  
function populateSelect(select) {
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    select.appendChild(opt);
  }
}

function createSelect(current, onChange) {
  const select = document.createElement('select');
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    if (i === current) opt.selected = true;
    select.appendChild(opt);
  }
  select.addEventListener('change', () => onChange(parseInt(select.value)));
  return select;
}

function setQty(name, price, qty, packaging = DEFAULT_PACKAGING_FEE) {
  if (qty === 0) {
    delete cart[name];
  } else {
    cart[name] = { price, qty, packaging };
  }
  updateCart();
}

function updateCart() {
  const list = document.getElementById('cart');
  list.innerHTML = '';
  let total = 0;
  let packagingTotal = 0;

  Object.entries(cart).forEach(([name, item]) => {
    const li = document.createElement('li');
    const sel = createSelect(item.qty, val => {
      const menuItem = document.querySelector(`[data-name="${name}"]`);
      if (menuItem) {
        const qtyInput = menuItem.querySelector('select');
        if (qtyInput) qtyInput.value = val;
      } else if (name.startsWith('Bubble Tea')) {
        const match = name.match(/^Bubble Tea \(([^,]+), ([^,]+), ([^)]+)\)$/);
        if (match) {
          const [, type, flavor, topping] = match;
          const curType = document.getElementById('bubbleType').value;
          const curFlavor = document.getElementById('bubbleFlavor').value;
          const curTopping = document.getElementById('bubbleTopping').value;
          if (type === curType && flavor === curFlavor && topping === curTopping) {
            document.getElementById('bubbleTeaQty').value = val;
          }
        }
      }
      setQty(name, item.price, val, item.packaging);
    });
    const subtotal = item.qty * item.price;
    li.textContent = `${name} = €${subtotal.toFixed(2)} `;
    li.appendChild(sel);
    list.appendChild(li);
    if (item.qty > 0) {
      total += subtotal;
      packagingTotal += (item.packaging || 0) * item.qty;
    }
  });

  const title = document.createElement('li');
  title.textContent = '— Extra’s —';
  title.style.marginTop = '10px';
  title.style.fontWeight = 'bold';
  list.appendChild(title);

  Object.keys(extras).forEach(id => {
    const li = document.createElement('li');
    li.textContent = `${extras[id].label}: `;
    const sel = createSelect(parseInt(document.getElementById(id).value || 0), val => {
      document.getElementById(id).value = val;
      updateCart();
    });
    li.appendChild(sel);
    list.appendChild(li);
  });

  updatePriceBreakdown(total, packagingTotal);

  const totalQty = Object.values(cart).reduce((s, it) => s + it.qty, 0) +
    Object.keys(extras).reduce((s, id) => s + parseInt(document.getElementById(id).value || 0), 0);

  const badge = document.getElementById('cart-count');
  badge.textContent = totalQty;
  badge.style.display = totalQty > 0 ? 'inline-block' : 'none';
}

document.addEventListener('DOMContentLoaded', () => {
  const bubbleSel = document.getElementById("bubbleTeaQty");
  populateSelect(bubbleSel);
  bubbleSel.addEventListener('change', () => changeBubbleQty(0));



  document.querySelectorAll('.menu-item select').forEach(sel => {
    if (['bubbleTeaQty', 'bubbleType', 'bubbleFlavor', 'bubbleTopping', 'xBentoMain', 'xBentoSide', 'xBentoRice'].includes(sel.id)) return;
    populateSelect(sel);
    const parent = sel.closest('.menu-item');
    const name = parent.dataset.name;
    const price = parseFloat(parent.dataset.price);
    const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
    sel.addEventListener('change', () => {
      setQty(name, price, parseInt(sel.value), pack);
    });
  });

  document.querySelectorAll('.qty-plus').forEach(btn => {
    if (['bubbleTeaQty', 'xBentoQty'].includes(btn.dataset.target)) return;
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val < 20) val++;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
      setQty(parent.dataset.name, parseFloat(parent.dataset.price), val, pack);
    });
  });

  document.querySelectorAll('.qty-minus').forEach(btn => {
    if (['bubbleTeaQty', 'xBentoQty'].includes(btn.dataset.target)) return;
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val > 0) val--;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
      setQty(parent.dataset.name, parseFloat(parent.dataset.price), val, pack);
    });
  });

  Object.keys(extras).forEach(id => {
    const sel = document.getElementById(id);
    populateSelect(sel);
    sel.addEventListener('change', updateCart);
  });

 function formatEuro(value) {
  value = parseFloat(value);
  return '€' + (value % 1 === 0 ? value.toFixed(0) : value.toFixed(2)).replace('.', ',');
}

const tipSel = document.getElementById('tipSelect');
for (let i = 0; i <= 20; i++) {
  const opt = document.createElement('option');
  opt.value = i;
  opt.textContent = formatEuro(i);  // ✅ 正确设置显示文本
  tipSel.appendChild(opt);
}

  tipSel.value = 0;
  tipSel.addEventListener('change', () => updatePriceBreakdown(currentSubtotal, currentPackaging));

  updateCart();
});
</script>
<script>
function showFeedback(msg, isError=false) {
  const el = document.getElementById('feedback');
  el.textContent = msg;
  if (isError) el.classList.add('error');
  else el.classList.remove('error');
  el.style.display = 'block';
  setTimeout(() => { el.style.display = 'none'; }, 3000);
}

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(){
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = 'sine';
  osc.frequency.setValueAtTime(660, audioCtx.currentTime);
  gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + 0.2);
}
document.body.addEventListener('click',()=>{if(audioCtx.state==='suspended') audioCtx.resume();},{once:true});

function scrollToField(id) {
  const el = document.getElementById(id);
  if (el) {
    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    el.focus();
    el.style.borderColor = 'red';
    setTimeout(() => { el.style.borderColor = ''; }, 2000);
  }
}

function getFirstMissingField() {
  const type = document.querySelector('input[name="orderType"]:checked').value;
  if (type === 'afhalen') {
    if (!document.getElementById('pickupName').value.trim()) return 'pickupName';
    if (!document.getElementById('pickupPhone').value.trim()) return 'pickupPhone';
    if (!document.getElementById('pickup_time').value) return 'pickup_time';
  } else {
    if (!document.getElementById('deliveryName').value.trim()) return 'deliveryName';
    if (!document.getElementById('deliveryPhone').value.trim()) return 'deliveryPhone';
    if (!document.getElementById('deliveryAddress').value.trim()) return 'deliveryAddress';
    if (!document.getElementById('deliveryHouseNumber').value.trim()) return 'deliveryHouseNumber';
    if (!document.getElementById('deliveryPostcode').value.trim()) return 'deliveryPostcode';
    if (!document.getElementById('deliveryArea').value.trim()) return 'deliveryArea';
    if (!document.getElementById('delivery_time').value) return 'delivery_time';
  }
  return null;
}

function generateOrderNumber() {
  const now = new Date();
  const date = now.toISOString().slice(0, 10).replace(/-/g, '');
  const rand = Math.random().toString(36).substring(2, 6).toUpperCase();
  return `NV${date}-${rand}`;
}

function checkout() {
  const paidItems = Object.values(cart).filter(item => item.price > 0 && item.qty > 0);
  if (paidItems.length === 0) {
    alert('U moet ten minste één gerecht selecteren om te bestellen.');
    return;
  }

  const sliderText = document.getElementById('sliderText');
  const sliderButton = document.getElementById('sliderButton');
  const sliderTrack = document.getElementById('sliderTrack');

  const missing = getFirstMissingField();
  if (missing) {
    showFeedback('Vul eerst uw gegevens in', true);
    scrollToField(missing);
    if (sliderText && sliderButton && sliderTrack) {
      sliderText.innerText = 'Schuif om te bestellen';
      sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
      sliderTrack.style.pointerEvents = 'auto';
    }
    isSubmitting = false;
    return;
  }

  const chopstickCount = document.getElementById('chopstickCount').value;
  const soyCount = document.getElementById('soyCount').value;
  const wasabiCount = document.getElementById('wasabiCount').value;
  const gemberCount = document.getElementById('gemberCount').value;
  const remark = document.getElementById('remark').value.trim();
  if (sliderText && sliderButton && sliderTrack) {
    sliderText.innerText = 'Bezig met verwerken…';
    sliderButton.innerHTML = `
<svg class="spinner" width="24" height="24" viewBox="0 0 44 44" fill="none" stroke="white">
  <circle cx="22" cy="22" r="20" stroke-width="4" stroke-linecap="round" stroke-dasharray="125" stroke-dashoffset="0">
    <animateTransform attributeName="transform" type="rotate" from="0 22 22" to="360 22 22" dur="1s" repeatCount="indefinite" />
  </circle>
</svg>`;
    sliderTrack.style.pointerEvents = 'none';
  }


  let orderSummary = Object.entries(cart)
    .map(([name, item]) => `${name} x ${item.qty}`)
    .join('\n');
  orderSummary += `\nStokjes nodig: ${chopstickCount}`;
  orderSummary += `\nSojasaus: ${soyCount}`;
  orderSummary += `\nWasabi: ${wasabiCount}`;
  orderSummary += `\nGember: ${gemberCount}`;
  if (remark) orderSummary += `\nOpmerking: ${remark}`;

  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  let customerDetails = '';
  let paymentMethod = '';
  let email = '';

  if (orderType === 'afhalen') {
    const name = document.getElementById('pickupName').value.trim();
    const phone = document.getElementById('pickupPhone').value.trim();
    email = document.getElementById('pickupEmail').value.trim();
    const time = document.getElementById('pickup_time').value;
    paymentMethod = document.getElementById('pickupPayment').value;


    customerDetails = `\n[Afhalen]\nNaam: ${name}\nTelefoon: ${phone}`;
    if (email) customerDetails += `\nEmail: ${email}`;
    customerDetails += `\nAfhaaltijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  } else {
    const name = document.getElementById('deliveryName').value.trim();
    const phone = document.getElementById('deliveryPhone').value.trim();
    email = document.getElementById('deliveryEmail').value.trim();
    const address = document.getElementById('deliveryAddress').value.trim();
    const houseNumber = document.getElementById('deliveryHouseNumber').value.trim();
    const postcodeRaw = document.getElementById('deliveryPostcode').value.trim();
    const area = document.getElementById('deliveryArea').value.trim();
    const time = document.getElementById('delivery_time').value;
    paymentMethod = document.getElementById('deliveryPayment').value;

    const postcodeClean = postcodeRaw.replace(/\s+/g, '');
    const postcode = postcodeClean.slice(0, 4);
    const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];


    if (!allowedPostcodes.includes(postcode)) {
      alert(`🚫 Wij bezorgen helaas niet in dit postcodegebied (${postcode}).`);
      const postcodeField = document.getElementById('deliveryPostcode');
      postcodeField.style.borderColor = 'red';
      postcodeField.focus();
      return;
    } else {
      document.getElementById('deliveryPostcode').style.borderColor = '';
    }

    customerDetails = `\n[Bezorgen]\nNaam: ${name}\nTelefoon: ${phone}`;
    if (email) customerDetails += `\nEmail: ${email}`;
    customerDetails += `\nAdres: ${address} ${houseNumber}\nPostcode: ${postcodeRaw}\nGebied: ${area}\nBezorgtijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  }

  const tip = parseFloat(document.getElementById('tipSelect').value);
  const subtotal = currentSubtotal;
  const packagingFee = Object.values(cart).reduce((s, it) => s + (it.packaging || 0) * it.qty, 0);
  const deliveryFee = orderType === 'bezorgen' ? 2.50 : 0;
  const btw = (subtotal + packagingFee) * 9 / 109;
  const total = subtotal + packagingFee + deliveryFee + tip;
  const totalPrice = !isNaN(total) ? total.toFixed(2) : "0.00";

  const orderNumber = generateOrderNumber();

  let tipLine = '';
  if (tip > 0) {
    tipLine = `\nFooi: €${tip.toFixed(2)}`;
  }

  const message = `📦 Nieuwe bestelling bij *Nova Asia*:\n\n${orderSummary}\n${customerDetails}${tipLine}\nTotaal: €${totalPrice}`;

  const itemsToSend = { ...cart };
  Object.keys(extras).forEach(id => {
    const qty = parseInt(document.getElementById(id).value || 0);
    if (qty > 0) itemsToSend[extras[id].label] = { price: 0, qty };
  });

   fetch('https://flask-order-api.onrender.com/submit_order', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
      orderType: orderType,
      name: orderType === 'afhalen'
        ? document.getElementById('pickupName').value.trim()
        : document.getElementById('deliveryName').value.trim(),
      phone: orderType === 'afhalen'
        ? document.getElementById('pickupPhone').value.trim()
        : document.getElementById('deliveryPhone').value.trim(),
      email: email,
      customerEmail: email,
      pickup_time: orderType === 'afhalen'
        ? document.getElementById('pickup_time').value
        : '',
      delivery_time: orderType === 'bezorgen'
        ? document.getElementById('delivery_time').value
        : '',
      paymentMethod: paymentMethod,
      postcode: orderType === 'bezorgen'
        ? document.getElementById('deliveryPostcode').value.trim()
        : '',
      house_number: orderType === 'bezorgen'
        ? document.getElementById('deliveryHouseNumber').value.trim()
        : '',
      street: orderType === 'bezorgen'
        ? document.getElementById('deliveryAddress').value.trim()
        : '',
      city: orderType === 'bezorgen'
        ? document.getElementById('deliveryArea').value.trim()
        : '',
      order_number: orderNumber,
      items: itemsToSend,
      opmerking: remark,
      tip: tip.toFixed(2),
      subtotal: subtotal.toFixed(2),
      packaging_fee: packagingFee.toFixed(2),
      delivery_fee: deliveryFee.toFixed(2),
      btw: btw.toFixed(2),
      totaal: isNaN(total) ? "0.00" : total.toFixed(2),
      message, email // ✅ 仍然推送到 Telegram
    })
  })
    .then(res => res.json())
    .then(data => {
      if (data.status === 'ok') {
        beep();
        showFeedback('Bestelling succesvol verzonden! Bestelnummer: ' + orderNumber);
        for (const k in cart) delete cart[k];
        updateCart();
        sliderText.innerText = 'Schuif om te betalen';
        sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
        sliderTrack.style.pointerEvents = 'auto';

        if (paymentMethod === 'online' && data.paymentLink) {
          window.location.href = data.paymentLink;
        } else {
          setTimeout(() => { window.location.href = '/'; }, 2000);
        }
      } else {
        showFeedback('Er is een fout opgetreden bij het verzenden van uw bestelling. Probeer het opnieuw.', true);
      }
        sliderText.innerText = 'Schuif om te betalen';
        sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
        sliderTrack.style.pointerEvents = 'auto';
    })
    .catch(err => {
      console.error(err);
      showFeedback('Er is een fout opgetreden bij het verzenden van uw bestelling. Probeer het opnieuw.', true);
       sliderText.innerText = 'Schuif om te betalen';
       sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
       sliderTrack.style.pointerEvents = 'auto';


    });
}



</script>
<script>
  function pad(num) {
    return num.toString().padStart(2, '0');
  }

  function populateTimeOptions(selectId, offsetMinutes) {
    const select = document.getElementById(selectId);
    if (!select) return;
    const prev = select.value; // keep current selection
    select.innerHTML = '';
    const now = new Date();
    now.setMinutes(now.getMinutes() + offsetMinutes);

    const open = new Date();
    open.setHours(12, 0, 0, 0);
    const close = new Date();
    close.setHours(23, 59, 0, 0);

    let start = now > open ? now : open;
    start = new Date(start);
    start.setMinutes(Math.ceil(start.getMinutes() / 15) * 15, 0, 0);

    for (let t = start; t <= close; t.setMinutes(t.getMinutes() + 15)) {
      const hh = pad(t.getHours());
      const mm = pad(t.getMinutes());
      const timeStr = `${hh}:${mm}`;
      const opt = document.createElement('option');
      opt.value = timeStr;
      opt.textContent = timeStr;
      select.appendChild(opt);
    }
    if (prev) {
      const option = Array.from(select.options).find(o => o.value === prev);
      if (option) select.value = prev;
    }
  }

  function toggleOrderType() {
    const afhalen = document.getElementById('afhalen');
    const infoBox = document.getElementById('locationInfo');
    const afhalenFields = document.getElementById('afhalenFields');
    const bezorgenFields = document.getElementById('bezorgenFields');
    const transferValues = (fromBox, toBox) => {
      const inputs = fromBox.querySelectorAll('input, select, textarea');
      inputs.forEach(src => {
        const key = src.id || src.name;
        if (!key) return;
        const target = toBox.querySelector(`#${CSS.escape(key)}`) ||
                       toBox.querySelector(`[name="${key}"]`);
        if (target && !target.value) {
          target.value = src.value;
        }
      });
    };

    if (afhalen.checked) {
      transferValues(bezorgenFields, afhalenFields);
      infoBox.innerHTML = `Adres voor afhalen:
  <a href="https://www.google.com/maps?q=Sjoukje+Dijkstralaan+83,+2134+CN+Hoofddorp" target="_blank" style="color: var(--accent-color); text-decoration: underline;">
    Sjoukje Dijkstralaan 83, 2134 CN Hoofddorp
</a><br>
  📞: <a href="tel:0633399366" style="color: var(--accent-color); text-decoration: underline;">0622599566</a>`;

      afhalenFields.classList.remove('hidden');
      bezorgenFields.classList.add('hidden');
      populateTimeOptions('pickup_time', 30);
    } else {
      transferValues(afhalenFields, bezorgenFields);
      infoBox.textContent = 'Wij bezorgen in de volgende postcodegebieden:\n2341, 2342, 2343, 2333, 2334, 2231, 2232, 2361, 2235';

      bezorgenFields.classList.remove('hidden');
      afhalenFields.classList.add('hidden');
      populateTimeOptions('delivery_time', 45);
    }
    updatePriceBreakdown(currentSubtotal, currentPackaging);
  }

  // 初始化执行一次
  toggleOrderType();
</script>
<script>
  const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];
  const postcodeInput = document.getElementById('deliveryPostcode');

  postcodeInput.addEventListener('blur', function () {
    const raw = this.value.trim();
    const formatRegex = /^[0-9]{4}[A-Z]{2}$/;
    let hint = document.getElementById('postcodeHint');

    if (!hint) {
      hint = document.createElement('div');
      hint.id = 'postcodeHint';
      hint.style.color = 'red';
      hint.style.marginTop = '4px';
      this.parentNode.appendChild(hint);
    }

    // 格式检查
    if (!formatRegex.test(raw)) {
      this.style.borderColor = 'red';
      hint.textContent = 'Postcode moet het formaat 1234AB hebben (zonder spatie).';
      return;
    }

    // 区域检查
    const postcode = raw.slice(0, 4); // 取前4位数字
    if (!allowedPostcodes.includes(postcode)) {
      this.style.borderColor = 'red';
      hint.textContent = `🚫 Wij bezorgen niet in dit postcodegebied (${postcode}).`;
    } else {
      this.style.borderColor = '';
      hint.textContent = '';
    }
  });
</script>
<script>
  const houseNumInput = document.getElementById('deliveryHouseNumber');
  const streetInput = document.getElementById('deliveryAddress');
  const areaInput = document.getElementById('deliveryArea');
  const mapLinkContainer = document.getElementById('mapLinkContainer');

  async function autofillAddress() {
    const postcode = postcodeInput.value.trim();
    const number = houseNumInput.value.trim();
    if (!postcode || !number) return;
    const url = `https://api.postcodeapi.nu/v3/lookup/${encodeURIComponent(postcode)}/${encodeURIComponent(number)}`;
    try {
      const res = await fetch(url, {
        headers: { 'X-Api-Key': 'juW6MEgEeL2BEM0rInEtB5a15BqXjWwO3YqrdH0z' }
      });
      if (res.ok) {
        const data = await res.json();
        if (data.street && !streetInput.value) streetInput.value = data.street;
        if (data.city && !areaInput.value) areaInput.value = data.city;
      } else {
        console.warn('Adres ophalen mislukt');
      }
    } catch (err) {
      console.warn('Adres ophalen mislukt');
    }
  }

  function updateMapLink() {
    const street = streetInput.value.trim();
    const house = houseNumInput.value.trim();
    const pc = postcodeInput.value.trim();
    const city = areaInput.value.trim();
    if (street && house && pc && city) {
      const address = `${street} ${house}, ${pc} ${city}`;
      const url = `https://www.google.com/maps?q=${encodeURIComponent(address)}`;
      mapLinkContainer.innerHTML = `<a href="${url}" target="_blank" style="color: var(--accent-color); text-decoration: underline;">Bekijk op Google Maps</a>`;
    } else {
      mapLinkContainer.innerHTML = '';
    }
  }

  postcodeInput.addEventListener('blur', () => { autofillAddress(); updateMapLink(); });
  houseNumInput.addEventListener('blur', () => { autofillAddress(); updateMapLink(); });
  streetInput.addEventListener('blur', updateMapLink);
  areaInput.addEventListener('blur', updateMapLink);
</script>
<script>
function showMobileCartButtonIfNeeded() {
  const toggleBtn = document.getElementById('cart-toggle');
  if (window.innerWidth < 768) {
    toggleBtn.style.display = 'block';
  } else {
    toggleBtn.style.display = 'none';
  }
}

showMobileCartButtonIfNeeded();

window.addEventListener('resize', showMobileCartButtonIfNeeded);
</script>
<script>
const backTopLogo = document.getElementById('back-to-top-logo');
backTopLogo.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
<script>
  ['chopstickCount', 'soyCount', 'wasabiCount', 'gemberCount'].forEach(id => {
    document.getElementById(id).addEventListener('change', updateCart);
  });
</script>
<script>
function toggleMobileCart() {
  const cartSection = document.getElementById('mobileCart');
  if (!cartSection.classList.contains('mobile-visible')) {
    const missing = getFirstMissingField();
    if (missing) {
      showFeedback('Vul eerst uw gegevens in', true);
      scrollToField(missing);
      return;
    }
  }
  cartSection.classList.toggle('mobile-visible');
}
</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.querySelectorAll('.nav-categories a:not(.review-link)');
      const sections = Array.from(navLinks).map(link => document.querySelector(link.getAttribute('href')));
      const indicator = document.getElementById('indicator');
      const navbarContainer = document.getElementById('navbar-container');

      function updateIndicator(activeLink) {
        const rect = activeLink.getBoundingClientRect();
        const containerRect = navbarContainer.getBoundingClientRect();
        const scrollLeft = navbarContainer.scrollLeft;
        indicator.style.width = `${rect.width}px`;
        indicator.style.transform = `translateX(${rect.left - containerRect.left + scrollLeft}px)`;
      }

      // 手动平滑滚动函数（更快）
      function scrollToOffset(container, targetOffset, duration = 150) {
        const start = container.scrollLeft;
        const distance = targetOffset - start;
        const startTime = performance.now();

        function animate(time) {
          const elapsed = time - startTime;
          const progress = Math.min(elapsed / duration, 1);
          container.scrollLeft = start + distance * progress;
          if (progress < 1) {
            requestAnimationFrame(animate);
          }
        }

        requestAnimationFrame(animate);
      }

      function scrollActiveLinkIntoView(activeLink) {
        if (window.innerWidth <= 768) {
          const container = navbarContainer;
          const containerRect = container.getBoundingClientRect();
          const linkRect = activeLink.getBoundingClientRect();
          const offset = linkRect.left - containerRect.left + container.scrollLeft;
          scrollToOffset(container, offset, 150); // 更快的平滑滚动
        }
      }

      function updateActiveNav() {
        let currentSection = sections[0];
        for (let section of sections) {
          const rect = section.getBoundingClientRect();
          if (rect.top <= 100) {
            currentSection = section;
          }
        }

        navLinks.forEach(link => link.classList.remove('active'));
        const activeLink = Array.from(navLinks).find(link => link.getAttribute('href') === `#${currentSection.id}`);
        if (activeLink) {
          activeLink.classList.add('active');
          updateIndicator(activeLink);
          scrollActiveLinkIntoView(activeLink);
        }
      }

      window.addEventListener('scroll', updateActiveNav);
      window.addEventListener('resize', () => {
        const activeLink = document.querySelector('.navbar a.active');
        if (activeLink) updateIndicator(activeLink);
      });

      updateActiveNav();
    });


   
  </script>
<script>
  const sections = document.querySelectorAll("section[id]");
  const navLinks = document.querySelectorAll(".nav-link");
  const indicator = document.querySelector(".indicator");

  function updateActiveLink() {
    let currentSectionId = "";

    sections.forEach((section) => {
      const rect = section.getBoundingClientRect();
      if (rect.top <= 100 && rect.bottom >= 100) {
        currentSectionId = section.id;
      }
    });

    navLinks.forEach((link) => {
      link.classList.remove("active");
      const hrefId = link.getAttribute("href")?.replace("#", "");
      if (hrefId === currentSectionId) {
        link.classList.add("active");

        const linkRect = link.getBoundingClientRect();
        const navRect = link.parentElement.getBoundingClientRect();
        const offsetLeft = linkRect.left - navRect.left;
        const offsetWidth = link.offsetWidth;

        // 使用 transform 来移动 .indicator
        indicator.style.transform = `translateX(${offsetLeft}px)`;
        indicator.style.width = `${offsetWidth}px`;
      }
    });
  }

  window.addEventListener("scroll", updateActiveLink);
  window.addEventListener("load", updateActiveLink);
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll("button");
    const vibrate = () => { if (navigator.vibrate) navigator.vibrate(50); };
    buttons.forEach(btn => {
      btn.addEventListener("mousedown", vibrate);
      btn.addEventListener("touchstart", vibrate, { passive: true });
    });
  });
</script>
<script>
window.addEventListener('DOMContentLoaded', () => {
  const track = document.getElementById('typeSliderTrack');
  const button = document.getElementById('typeSliderButton');
  const text = document.getElementById('typeSliderText');
  const afhalen = document.getElementById('afhalen');
  const bezorgen = document.getElementById('bezorgen');

  if (!track || !button || !text) return;

  function getPadding(el) {
    const style = window.getComputedStyle(el);
    return {
      left: parseInt(style.paddingLeft) || 0,
      right: parseInt(style.paddingRight) || 0
    };
  }

  function getMaxSlide() {
    const padding = getPadding(track);
    return track.offsetWidth - button.offsetWidth - padding.left - padding.right;
  }

  function setLeftPosition(position) {
    const padding = getPadding(track);
    button.style.left = `${padding.left + position}px`;
  }

  function updateTexts(orderType) {
    if (orderType === 'afhalen') {
      button.innerText = 'Pick Up';
      text.innerText = 'Slide to Deliver';
      text.classList.remove('left');
      text.style.right = '4px';
      text.style.left = 'auto';
    } else {
      button.innerText = 'Deliver';
      text.innerText = 'Slide to Pick Up';
      text.classList.add('left');
      text.style.left = '12px';
      text.style.right = 'auto';
    }
  }

  function updateSliderToCurrentRadio() {
    const padding = getPadding(track);
    const maxSlide = getMaxSlide();

    if (bezorgen.checked) {
      setLeftPosition(maxSlide);
      updateTexts('bezorgen');
    } else {
      setLeftPosition(0);
      updateTexts('afhalen');
    }
  }

  updateSliderToCurrentRadio();

  afhalen.addEventListener('change', updateSliderToCurrentRadio);
  bezorgen.addEventListener('change', updateSliderToCurrentRadio);

  // 拖动逻辑
  let isSliding = false;
  let startX = 0;
  let initialLeft = 0;

  const startSlide = (clientX) => {
    isSliding = true;
    startX = clientX;
    initialLeft = parseInt(button.style.left) || getPadding(track).left;
  };

  const moveSlide = (clientX) => {
    if (!isSliding) return;

    const padding = getPadding(track);
    const maxSlide = getMaxSlide();

    const delta = clientX - startX;
    const newLeft = Math.max(0, Math.min(initialLeft + delta - padding.left, maxSlide));

    button.style.left = `${padding.left + newLeft}px`;
  };

  const endSlide = () => {
    if (!isSliding) return;
    isSliding = false;

    const padding = getPadding(track);
    const maxSlide = getMaxSlide();
    const currentLeft = parseInt(button.style.left || '0') - padding.left;
    const movedRatio = currentLeft / maxSlide;

    if (movedRatio > 0.5) {
      // 推到右边
      setLeftPosition(maxSlide);
      updateTexts('bezorgen');
      bezorgen.checked = true;
    } else {
      // 回到左边
      setLeftPosition(0);
      updateTexts('afhalen');
      afhalen.checked = true;
    }

    toggleOrderType(); // 保留表单联动
  };

  button.addEventListener('touchstart', (e) => startSlide(e.touches[0].clientX));
  track.addEventListener('touchmove', (e) => moveSlide(e.touches[0].clientX));
  track.addEventListener('touchend', endSlide);

  button.addEventListener('pointerdown', (e) => startSlide(e.clientX));
  track.addEventListener('pointermove', (e) => moveSlide(e.clientX));
  track.addEventListener('pointerup', endSlide);
  track.addEventListener('pointerleave', endSlide);
});

</script>
<script>
window.addEventListener('DOMContentLoaded', () => {
  const padding = getHorizontalPadding(sliderTrack);
  sliderButton.style.left = `${padding.left}px`;
});

const sliderButton = document.getElementById('sliderButton');
const sliderTrack = document.getElementById('sliderTrack');
const sliderText = document.querySelector('.slider-text');

let isSliding = false;
let startX = 0;
let initialLeft = 0;
let isSubmitting = false;

function getHorizontalPadding(el) {
  const style = window.getComputedStyle(el);
  const left = parseInt(style.paddingLeft) || 0;
  const right = parseInt(style.paddingRight) || 0;
  return { left, right };
}

function getMaxSlide() {
  const padding = getHorizontalPadding(sliderTrack);
  const trackWidth = sliderTrack.offsetWidth;
  const buttonWidth = sliderButton.offsetWidth;
  return trackWidth - buttonWidth - padding.left - padding.right;
}




function triggerCheckout() {
  if (isSubmitting) return;
  isSubmitting = true;

  const padding = getHorizontalPadding(sliderTrack);
  sliderButton.style.left = `${padding.left + getMaxSlide()}px`;

  // ⏳ 显示处理中
  sliderText.innerText = 'Bezig met verwerken…';
  sliderButton.innerHTML = `
<svg class="spinner" width="24" height="24" viewBox="0 0 44 44" fill="none" stroke="white">
  <circle cx="22" cy="22" r="20" stroke-width="4" stroke-linecap="round" stroke-dasharray="125" stroke-dashoffset="0">
    <animateTransform attributeName="transform" type="rotate" from="0 22 22" to="360 22 22" dur="1s" repeatCount="indefinite" />
  </circle>
</svg>`;

  sliderTrack.style.pointerEvents = 'none';

  checkout(); // ⬅️ 触发逻辑
}

sliderButton.addEventListener('touchstart', (e) => {
  isSliding = true;
  startX = e.touches[0].clientX;
  initialLeft = parseInt(sliderButton.style.left) || getHorizontalPadding(sliderTrack).left;
});

sliderTrack.addEventListener('touchmove', (e) => {
  if (!isSliding) return;

  const padding = getHorizontalPadding(sliderTrack);
  const maxSlide = getMaxSlide();

  const delta = e.touches[0].clientX - startX;
  const moveX = Math.max(0, Math.min(initialLeft + delta - padding.left, maxSlide));

  sliderButton.style.left = `${padding.left + moveX}px`;
});

  sliderTrack.addEventListener('touchend', () => {
    isSliding = false;
    const padding = getHorizontalPadding(sliderTrack);
    const maxSlide = getMaxSlide();

  const currentLeft = parseInt(sliderButton.style.left || '0') - padding.left;
  const movedRatio = currentLeft / maxSlide;

  if (movedRatio > 0.6) {
    triggerCheckout();
  } else {
    sliderButton.style.left = `${padding.left}px`;
  }
});
</script>
<script>
  (function() {
    const fields = document.querySelectorAll('#afhalenFields input, #afhalenFields select, #bezorgenFields input, #bezorgenFields select');
    let hideTimer;

    function isMobile() {
      return window.innerWidth <= 768 || /Mobi|Android/i.test(navigator.userAgent);
    }

    function requiredFilled() {
      const type = document.querySelector('input[name="orderType"]:checked').value;
      if (type === 'afhalen') {
        return document.getElementById('pickupName').value.trim() &&
               document.getElementById('pickupPhone').value.trim() &&
               document.getElementById('pickup_time').value;
      }
      return document.getElementById('deliveryName').value.trim() &&
             document.getElementById('deliveryPhone').value.trim() &&
             document.getElementById('deliveryAddress').value.trim() &&
             document.getElementById('deliveryHouseNumber').value.trim() &&
             document.getElementById('deliveryPostcode').value.trim() &&
             document.getElementById('deliveryArea').value.trim() &&
             document.getElementById('delivery_time').value;
    }

    function scheduleHide() {
      clearTimeout(hideTimer);
      hideTimer = setTimeout(() => {
        if (isMobile() && requiredFilled()) {
          fields.forEach(el => el.blur());
        }
      }, 3000);
    }

    fields.forEach(el => {
      ['input', 'focus', 'click'].forEach(evt => el.addEventListener(evt, scheduleHide));
    });

    document.getElementById('afhalen').addEventListener('change', scheduleHide);
    document.getElementById('bezorgen').addEventListener('change', scheduleHide);
  })();
</script>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
function updateStatus(val){
  const banner = document.getElementById('status-banner');
  if(val === 'false'){
    banner.textContent = '暂不接单';
    banner.style.display = 'block';
  }else{
    banner.textContent = '';
    banner.style.display = 'none';
  }
}
function fetchStatus(){
  fetch('/api/settings/is_open')
    .then(r => r.json())
    .then(d => updateStatus(d.is_open));
}
fetchStatus();
setInterval(fetchStatus, 30000);
const socket = io();
socket.on('setting_update', d => { if(d.key === 'is_open'){ updateStatus(d.value); }});
</script>

<div id="reviewsModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:1000;">
  <div style="background:white; padding:20px; width:100%; height:100%; overflow:auto;" id="reviewsContent">
    <h2>Reviews</h2>
    <div id="reviewsList"></div>
    <button id="closeReviews">Sluiten</button>
  </div>
</div>

<script>
  const modal = document.getElementById('reviewsModal');
  const openBtn = document.getElementById('openReviews');
  const closeBtn = document.getElementById('closeReviews');
  const reviewsList = document.getElementById('reviewsList');

  function renderReviews(data){
    reviewsList.innerHTML = data.map(r => {
      const stars = '★'.repeat(r.rating || 0) + '☆'.repeat(5 - (r.rating || 0));
      return `<p><strong>${r.customer_name}</strong> <span class="stars">${stars}</span><br>${r.content}</p>`;
    }).join('');
  }

  async function loadReviews(){
    const r = await fetch('/api/reviews');
    if(r.ok){
      const d = await r.json();
      renderReviews(d);
    }
  }

  openBtn.addEventListener('click', () => {
    modal.style.display = 'flex';
    loadReviews();
  });
  closeBtn.addEventListener('click', () => { modal.style.display = 'none'; });
  if(typeof socket !== 'undefined'){
    socket.on('new_review', () => {
      if(modal.style.display !== 'none') loadReviews();
    });
  }
</script>





</body>
</html>





